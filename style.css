body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; padding: 1rem; }
main { max-width: 900px; margin: 0 auto; }
.overlay { position: fixed; inset: 0; background: rgba(0,0,0,.6); display: flex; align-items: center; justify-content: center; z-index: 10; }
.overlay .card { background:#fff; padding:16px; border-radius:10px; width: min(420px, 90vw); display:flex; flex-direction:column; gap:8px; }
.overlay input { padding:8px; }
.timer { position: sticky; top: 0; background: #111; color:#fff; padding:6px 10px; display:inline-block; margin-top:8px; border-radius:6px; font-variant-numeric: tabular-nums; }
.msg { color: #b00; font-size: 0.9rem; }
.grid { border-collapse: collapse; }
.grid td { width: 36px; height: 36px; border: 1px solid #bbb; text-align: center; padding: 0; }
.grid td.block { background: #333; }
.grid input { width: 100%; height: 100%; border: none; text-transform: uppercase; text-align: center; font-size: 18px; }
.controls { margin-top: 12px; display: flex; gap: 8px; }
input { padding: 8px; margin-right: 8px; }
button { padding: 8px 12px; }
/* Make each cell a square with visible grid lines */
.grid {
  border-collapse: collapse;
  margin: 0 auto;
}
.grid td {
  position: relative;                 /* for number overlay */
  width: 36px;
  height: 36px;
  border: 1px solid #9aa0a6;          /* vertical + horizontal lines */
  background: #fff;
  padding: 0;
}
.grid td.block {
  background: #222;                    /* black squares */
  border-color: #222;
}

/* Inputs */
.grid td input {
  width: 100%;
  height: 100%;
  border: 0;
  outline: none;
  background: transparent;
  text-transform: uppercase;
  text-align: center;
  font: 600 18px/36px system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  caret-color: #000;
}

/* Little number in top-left of the first cell of a word */
.grid td .num {
  position: absolute;
  top: 2px; left: 3px;
  font-size: 10px;
  color: #444;
  user-select: none;
  pointer-events: none;
}

/* Highlight the active word */
.grid td.active { background: #fff6c2; }
.grid td.active.block { background: #222; }

/* Clues */
.cluewrap {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  max-width: 720px;
  margin: 16px auto;
}
.cluewrap h3 { margin: 0 0 6px; font-size: 14px; }
.cluewrap ol { margin: 0; padding-left: 24px; max-height: 260px; overflow: auto; }
.cluewrap li { margin: 2px 0; font-size: 14px; cursor: pointer; }
.current-clue { text-align: center; margin: 10px auto; font-weight: 600; }
/* Whole-word highlight (already present, keep it) */
.grid td.active { background: #fff6c2; }     /* light yellow */
.grid td.active.block { background: #222; }

/* Focused cell: stronger box + slightly richer fill.
   Use box-shadow so borders don't reflow the table. */
.grid td.cursor {
  background: #ffe38f;                        /* a bit deeper than .active */
  box-shadow:
    inset 0 0 0 2px #d97706,                  /* thick inner line (amber) */
    0 0 0 1px transparent;                    /* keeps Chrome from collapsing */
  position: relative;                         /* ensure stacking for shadow */
  z-index: 1;                                 /* draws over neighbors */
}

/* Optional: make the letter stand out in the focused cell */
.grid td.cursor input {
  font-weight: 700;
}
/* -------------------------------
   ðŸ“±  Mobile layout adjustments
--------------------------------*/
@media (max-width: 700px) {
  /* Scale the grid to fit width while keeping it readable */
  .grid {
    width: 95vw;                /* fit screen */
    height: auto;
    table-layout: fixed;
    transform-origin: top center;
  }

  .grid td {
    width: calc(95vw / 15);     /* assuming a 15x15 grid; adjust dynamically if needed */
    height: calc(95vw / 15);
  }

  /* Hide full clue lists */
  .cluewrap {
    display: none;
  }

  /* Keep only current clue visible */
  .current-clue {
    display: block;
    background: #fef9c3;         /* subtle highlight */
    border: 1px solid #d6a700;
    border-radius: 6px;
    padding: 6px 8px;
    font-size: 15px;
    line-height: 1.4;
    margin: 10px auto;
    width: 95%;
    box-sizing: border-box;
  }

  /* Make buttons larger for touch */
  .controls button {
    flex: 1;
    padding: 12px;
    font-size: 16px;
  }

  /* Center timer and reduce top padding */
  .timer {
    position: fixed;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 20;
  }
}

/* ===== Layout: desktop two-column ===== */
.play {
  display: grid;
  grid-template-columns: auto 320px; /* grid left, clues right */
  gap: 20px;
  align-items: start;
}

/* Clues panel */
.cluewrap {
  max-height: 70vh;
  overflow: auto;
}
.cluewrap h3 { margin: 0 0 6px; font-size: 14px; }
.cluewrap ol { margin: 0; padding-left: 24px; }
.cluewrap li { margin: 2px 0; font-size: 14px; cursor: pointer; }

.current-clue { text-align: center; margin: 10px auto; font-weight: 600; display: none; }

/* ===== Cell sizing via CSS variable (we'll set --cell in JS) ===== */
:root { --cell: 36px; }               /* fallback */
.grid td { width: var(--cell); height: var(--cell); }

/* Your existing grid styles still apply:
   .grid { border-collapse: collapse; table-layout: fixed; } etc. */

/* ===== Mobile behavior ===== */
@media (max-width: 800px) {
  .play { display: block; }           /* stack grid; hide side clues */
  .cluewrap { display: none; }

  /* Show only the current clue under the grid */
  .current-clue {
    display: block;
    background: #fef9c3;
    border: 1px solid #d6a700;
    border-radius: 6px;
    padding: 6px 8px;
    font-size: 15px;
    line-height: 1.35;
    width: 96%;
    box-sizing: border-box;
  }

  /* Let the grid fill the width nicely */
  #puzzle { width: 96vw; margin: 0 auto; }
  .grid { width: 100%; }

  /* Touch-friendly buttons */
  .controls button { flex: 1; padding: 12px; font-size: 16px; }
}

/* ===== Word highlight + focused cell (from earlier step) ===== */
.grid td.active { background: #fff6c2; }
.grid td.active.block { background: #222; }
.grid td.cursor {
  background: #ffe38f;
  box-shadow: inset 0 0 0 2px #d97706;
  position: relative;
  z-index: 1;
}
.grid td .num { position:absolute; top:2px; left:3px; font-size:10px; color:#444; }

/* ===== Desktop: clues on the right ===== */
.play {
  display: grid;
  grid-template-columns: auto 320px;
  gap: 20px;
  align-items: start;
}
#grid-wrap { max-width: calc(var(--cell, 36px) * 15); } /* safety */

/* ===== Mobile layout ===== */
@media (max-width: 800px) {
  :root { --cell: 32px; }              /* fallback; JS will override */

  body { padding: 6px; }               /* tighter margins on phone */
  .play { display: block; }
  .cluewrap { display: none; }         /* hide full lists on phone */

  /* The grid wrapper takes almost the whole visible viewport. */
  #grid-wrap {
    width: 96vw;                       /* nearly full-width */
    margin: 4px auto 8px;
    /* Height will be set by JS via --vhAvail, but constrain in CSS too: */
    max-height: calc(var(--vhAvail, 70vh) - 160px); /* header/controls/clue room */
    overflow: hidden;                   /* keep it snug */
  }

  /* Square cells computed via --cell */
  .grid { width: 100%; border-collapse: collapse; table-layout: fixed; }
  .grid td { width: var(--cell); height: var(--cell); }

  /* Only the active clue shows on phone */
  .current-clue {
    display: block;
    background: #fef9c3;
    border: 1px solid #d6a700;
    border-radius: 6px;
    padding: 6px 8px;
    font-size: 15px;
    line-height: 1.35;
    width: 96%;
    margin: 6px auto 10px;
    box-sizing: border-box;
  }

  .controls { gap: 8px; }
  .controls button { flex: 1; padding: 12px; font-size: 16px; }
}

/* Word + focus styling (from earlier) */
.grid td.active { background: #fff6c2; }
.grid td.active.block { background: #222; }
.grid td.cursor { background: #ffe38f; box-shadow: inset 0 0 0 2px #1d4ed8; z-index: 1; }
.grid td .num { position:absolute; top:2px; left:3px; font-size:10px; color:#444; }
